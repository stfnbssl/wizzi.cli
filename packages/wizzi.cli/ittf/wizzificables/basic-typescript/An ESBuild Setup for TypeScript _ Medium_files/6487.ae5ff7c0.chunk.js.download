(self.webpackChunklite=self.webpackChunklite||[]).push([[6487],{69920:(e,n,t)=>{"use strict";t.d(n,{Z:()=>o});var i=t(67294);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},a.apply(this,arguments)}var l=i.createElement("path",{d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18zM8.25 12h7.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"});const o=function(e){return i.createElement("svg",a({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),l)}},14045:(e,n,t)=>{"use strict";t.d(n,{M:()=>r});var i=t(67294),a=t(77355),l=t(93310),o=t(50458);function r(e){var n=e.entityName,t=void 0===n?"story":n;return i.createElement(a.x,{textAlign:"center"},"Deletion is not reversible, and the story will be completely deleted. If you do not want to delete, you can"," ",i.createElement(l.r,{target:"_blank",href:o.aH,inline:!0,linkStyle:"OBVIOUS"},"unlist the ",t),".")}},4423:(e,n,t)=>{"use strict";t.d(n,{f:()=>V,e:()=>M});var i=t(81253),a=t(96156),l=t(34699),o=t(38460),r=t(21919),d=t(67294),s=t(25550),c=t(18627),u=t(66411),m=t(14646),p=t(75221),k=t(78285),v=t(68894),f=t(11462),g=t(87329),S={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_publisher"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isMuting"}}]}}]}}]}}].concat((0,g.Z)([{kind:"FragmentDefinition",name:{kind:"Name",value:"NegativeSignalModal_publisher"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Publisher"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}}]}}]))},b={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"ExplicitSignalPostQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"NegativeSignalModal_post"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"explicitSignalState"}}]}}]}}]}}].concat((0,g.Z)(S.definitions))},y={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ExplicitSignalMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"signal"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ExplicitUserSignal"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendExplicitSignal"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"signal"},value:{kind:"Variable",name:{kind:"Name",value:"signal"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},N=t(78964),E=t(78038),h=t(61095),w=t(50474),x=t(77355),C=t(47230),F=t(53563),O={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"};function P(e){var n,t,i=e.hide,a=e.onUndo,o=e.isVisible,r=e.post,c=null!==(n=null===(t=r.creator)||void 0===t?void 0:t.id)&&void 0!==n?n:"",u=(0,h.Pd)({id:c}).viewerEdge,m=(0,s.r)().viewerId,p=(0,v.O)(!1),k=(0,l.Z)(p,3),f=k[0],g=k[1],S=k[2],b=(0,d.useState)(!1),y=(0,l.Z)(b,2),E=y[0],O=y[1],P=(0,d.useCallback)((function(){E&&a(),O(!1),i()}),[a,E,i]),D=(0,d.useCallback)((function(){O(!0)}),[]),A=(0,N.J)({viewerId:m,targetAuthorId:c,targetPostId:r.id,onOptimisticComplete:S}),R=(0,d.useCallback)((function(){g(),i()}),[i]);return d.createElement(d.Fragment,null,o&&d.createElement(F.u,{hide:P,title:"Got it, now showing less",subtitleTextAlign:"center",subtitle:"We’ll recommend fewer stories like this. You can always show more/less from a story’s “••• More” icon.",delayHideEnabled:E},d.createElement(x.x,{display:"flex",justifyContent:"center",marginBottom:"8px"},d.createElement(x.x,{width:"100%",maxWidth:"320px",display:"flex",flexDirection:"column",gap:"8px"},d.createElement(C.zx,{onClick:D},"Undo"),r.creator&&!r.creator.viewerEdge.isMuting&&d.createElement(I,{publisher:r.creator,hide:i}),r.collection&&!r.collection.viewerEdge.isMuting&&d.createElement(I,{publisher:r.collection,hide:i}),d.createElement(C.zx,{buttonStyle:"ERROR_SUBTLE",onClick:R},"Report story...")))),d.createElement(w.U,{isVisible:f,hide:S,type:"story",alreadyBlocking:!(null==u||!u.isBlocking),onSubmit:A}))}function I(e){var n=e.publisher,t=e.hide,i=(0,m.I)(),a=(0,c.A)(),l="User"===n.__typename,o=(0,E.l)(l?n.id:null,l?null:n.id),r=o.muteAuthor,s=o.mutePub,u=(0,d.useCallback)((function(){var e="".concat(n.__typename.toLowerCase(),".muted");a.event(e,{targetUserId:l?n.id:void 0,collectionId:l?void 0:n.id}),l?r():s(),t()}),[r,s,l,n]);return d.createElement(C.zx,{onClick:u},d.createElement("div",{className:i(O)},"Mute ",l?"author":"publication"," — ",n.name))}var D=["getPostData"];function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function R(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){(0,a.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var T=function(e){return{overflow:"hidden",transition:"opacity 300ms ease".concat(e?"":" 300ms",", max-height 300ms ease").concat(e?" 300ms":""),maxHeight:e?"0":{xs:"398px",sm:"264px",md:"340px",lg:"340px",xl:"340px"},opacity:e?0:1}},_=(0,d.createContext)({explicitSignal:void 0,showMore:function(){return null},showLess:function(){return null},undo:function(){return null},showConfirmation:function(){return null},getPostData:function(){return null},loading:!1});function V(e){var n,t=e.children,i=e.postId,a=e.withShowMoreAnimation,g=e.withShowLessAnimation,S=e.hidePost,N=e.unhidePost,E=(0,m.I)(),h=(0,c.A)(),w=(0,u.Lk)()||{},x=(0,s.r)().viewerId,C=(0,d.useState)(),F=(0,l.Z)(C,2),O=F[0],I=F[1],D=(0,v.O)(!1),A=(0,l.Z)(D,3),V=A[0],M=A[1],j=A[2],L=(0,k.w)(),B=(0,o.t)(b,{variables:{id:i}}),Z=(0,l.Z)(B,2),U=Z[0],G=Z[1],H=G.data,z=G.loading,K=(0,r.D)(y),W=(0,l.Z)(K,1)[0],Q=(0,d.useCallback)((function(e){W({variables:{postId:i,signal:e},update:function(n){x&&n.modify({id:"PostViewerEdge:".concat((0,f.Q)(i,x)),fields:{explicitSignalState:function(){return e===p.tG.CLEAR_SIGNAL?null:e}}})}})}),[W,i,x]),Y=(0,d.useCallback)((function(e,n,t){return h.event(e,R({postId:i,source:n},t))}),[i,w]),J=(0,d.useCallback)((function(e){Q(p.tG.CLEAR_SIGNAL),L({message:"Undone. We won’t recommend ".concat(O===p.tG.SHOW_LESS?"fewer":"more"," stories like this."),extraParams:{hideCloseButton:!0}}),I(void 0),Y("post.see_".concat(O===p.tG.SHOW_LESS?"less":"more",".undo"),e),O===p.tG.SHOW_LESS&&(null==N||N(i))}),[N,i,O]),q=(0,d.useCallback)((function(e){switch(e){case p.tG.SHOW_LESS:M();break;case p.tG.SHOW_MORE:L({toastStyle:"USER_POSITIVE_SIGNAL",extraParams:{onClickUndo:function(){return J((0,u.f0)(R(R({},w),{},{dimension:"toast"})))}}})}}),[J]),X=(0,d.useCallback)((function(e){Q(p.tG.SHOW_MORE),I(p.tG.SHOW_MORE),Y("post.see_more",e),a||q(p.tG.SHOW_MORE)}),[a,q,Y,Q]),$=(0,d.useCallback)((function(e){Q(p.tG.SHOW_LESS),I(p.tG.SHOW_LESS),Y("post.see_less",e,{mutationSent:!0}),g||M()}),[g,Y,Q]),ee=(0,d.useCallback)((function(e){O===p.tG.SHOW_LESS&&("max-height"===e.propertyName?M():null==S||S(i))}),[O,i,S]),ne=(0,d.useCallback)((function(){J((0,u.f0)(R(R({},w),{},{dimension:"negative_signal_modal"})))}),[w,J]),te=(0,d.useMemo)((function(){var e;return{showMore:X,showLess:$,undo:J,explicitSignal:(null==H||null===(e=H.post)||void 0===e?void 0:e.viewerEdge.explicitSignalState)||O,showConfirmation:q,getPostData:U,loading:z}}),[X,$,J,O,q,U,null==H||null===(n=H.post)||void 0===n?void 0:n.viewerEdge.explicitSignalState,z]);return d.createElement(_.Provider,{value:te},g?d.createElement("div",{className:E(T(O===p.tG.SHOW_LESS)),onTransitionEnd:ee},t):t,(null==H?void 0:H.post)&&d.createElement(P,{post:H.post,isVisible:V,hide:j,onUndo:ne}))}function M(){var e=(0,d.useContext)(_),n=e.getPostData,t=(0,i.Z)(e,D);return n(),t}},66487:(e,n,t)=>{"use strict";t.d(n,{t:()=>hn});var i=t(67294),a=t(22122),l=t(34699),o=t(96156),r=t(48403),d=t.n(r),s=t(64718),c=t(14045),u=t(81253),m=t(38356),p=t(42130),k=["isResponsive"],v=function(e){var n=e.isResponsive,t=(0,u.Z)(e,k);return i.createElement(m.u,(0,a.Z)({text:n?"More":void 0,icon:i.createElement(p.Z,null)},t))},f=t(86706),g=t(13195),S=t(6443),b=t(39507),y=t(38352),N=t(93310),E=t(83486),h=t(43487),w=t(51681),x=function(e){var n=e.post,t=e.hidePopover,a=(0,S.H)().value,l=null==a?void 0:a.id,o=(0,b.T)(n).viewerEdge,r=(0,f.I0)(),d=i.useCallback((function(e){return r((0,E.at)(e))}),[r]),s=(0,h.b$)((function(e){return e.multiVote.clapsPerPost})),c=(0,w.l)(s,n,o),u=c.clapCount,m=c.viewerClapCount,p=(0,g.C)();return l&&u&&m&&m>0?i.createElement(i.Fragment,null,i.createElement(y.Sl,null,i.createElement(N.r,{onClick:function(){p(n,(null==a?void 0:a.id)||"",-m,o),d({postId:n.id,clapCount:u-m,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),t()}},"Undo claps")),i.createElement(y.oK,null)):null},C=t(23768),F=t(32947),O=t(70028),P=t(66021),I=t(90833),D=t(70679),A=t(77355),R=t(87691),T=t(14646),_=t(50458),V={cursor:"not-allowed",marginBottom:"8px",opacity:.5},M=function(e){var n=e.post,t=e.shareKey,a=(0,T.I)();return n&&t?i.createElement(y.Sl,null,i.createElement(A.x,{width:"174px"},i.createElement("div",{className:a(V)},"Copy Friend Link"),i.createElement(R.F,{scale:"S",color:"LIGHTER"},'Friend links have moved to the "Share" menu.  ',i.createElement(N.r,{linkStyle:"OBVIOUS",inline:!0,href:(0,_.wA)()},"Learn more")))):null},j=t(32493),L=t(78285),B={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostAllowResponsesMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostAllowResponses"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"allowResponses"},value:{kind:"Variable",name:{kind:"Name",value:"allowResponses"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"allowResponses"}}]}}]}}]},Z=(0,f.$j)()((function(e){var n=e.children,t=e.dispatch,a=e.onCompleted,l=e.targetPostId;return i.createElement(j.m,{mutation:B,onCompleted:function(){t((0,L.Dx)({message:"Responses are now hidden for this post."})),a&&a()},variables:{targetPostId:l,allowResponses:!1},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:l,allowResponses:!1}}},(function(e){return n({mutate:e})}))})),U=(0,f.$j)()((function(e){var n=e.children,t=e.dispatch,a=e.onCompleted,l=e.targetPostId;return i.createElement(j.m,{mutation:B,onCompleted:function(){t((0,L.Dx)({message:"Responses are now shown for this post."})),a&&a()},variables:{targetPostId:l,allowResponses:!0},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:l,allowResponses:!0}}},(function(e){return n({mutate:e})}))})),G=t(75675),H=t(68894),z=function(e){var n=e.hidePopover,t=e.postId,a=e.allowResponses,o=(0,H.O)(!1),r=(0,l.Z)(o,3),d=r[0],s=r[1],c=r[2],u=function(){c(),n()};return i.createElement(i.Fragment,null,i.createElement(Z,{targetPostId:t},(function(e){var n=e.mutate;return i.createElement(G.w,{onConfirm:n,isVisible:d,hide:u,entityTypename:"Post"})})),i.createElement(U,{targetPostId:t},(function(e){var n=e.mutate;return i.createElement(y.Sl,null,i.createElement(N.r,{onClick:function(){a?s():n()}},a?"Hide responses":"Show responses"))})))},K=t(75412),W=t(71652),Q=t(87329),Y=t(84683),J={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CollectionSubmissionOption_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionAvatar_collection"}}]}}].concat((0,Q.Z)(Y.d.definitions))},q={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CollectionSubmissionPopoverQuery"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewer"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"writerCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}},{kind:"Field",name:{kind:"Name",value:"adminCollections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CollectionSubmissionOption_collection"}}]}}]}}]}}].concat((0,Q.Z)(J.definitions))},X=t(21919),$=t(75221),ee=[{kind:"FragmentDefinition",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Collection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}}],ne={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ManageCollectionPostStatusMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}}].concat((0,Q.Z)(ee))},te={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RejectPostFromPubMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"status"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"CollectionPostStatus"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"manageCollectionPostStatus"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"collectionSlug"},value:{kind:"Variable",name:{kind:"Name",value:"collectionSlug"}}},{kind:"Argument",name:{kind:"Name",value:"status"},value:{kind:"Variable",name:{kind:"Name",value:"status"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ManageCollectionPostStatus_collection"}}]}}]}}]}}].concat((0,Q.Z)(ee))},ie=function(e){var n=(0,X.D)(ne),t=(0,l.Z)(n,1)[0];return(0,i.useCallback)((function(n){return t({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:$.Zj.APPROVED}})}),[e])},ae=function(e){var n=(0,X.D)(te),t=(0,l.Z)(n,1)[0];return(0,i.useCallback)((function(n){return t({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:$.Zj.REMOVED},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:null,collection:null,pendingCollection:null}}}).then((function(e){if(e.errors&&e.errors[0])throw e.errors[0];return e}))}),[e])},le=t(25267),oe=t(91583),re=t(47230),de=t(66227),se=t(73917),ce=t(70310),ue=t(20113),me=t(90586),pe=t(34135),ke="collectionSubmissionPopover",ve=[{name:"",value:"No publication",content:i.createElement(A.x,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},i.createElement(R.F,{scale:"M",color:"DARKER"},"No publication"))}];function fe(e){var n=e.collection;return n.name?i.createElement(A.x,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},i.createElement(R.F,{scale:"M",color:"DARKER"},n.name),i.createElement(W.v,{collection:n,size:32})):null}function ge(e){var n=e.show,t=e.post,a=t.statusForCollection,o=t.isPublished,r=i.useState(!1),d=(0,l.Z)(r,2),s=d[0],c=d[1];return s||pe.V6.on("load",(function(){return c(!0)})),!a&&o&&s?i.createElement(be,{post:t,noQueryReturn:null},(function(e){var a=e.loading,l=e.error,o=e.data;if(a||l)return null;var r=(void 0===o?{viewer:void 0}:o).viewer,d=t.creator;if(!r||!d||r.id!==d.id)return null;var s=r.adminCollections,c=r.writerCollections;return 0===s.length&&0===c.length?null:i.createElement(y.Sl,null,i.createElement(N.r,{"aria-controls":ke,"aria-expanded":"false",onClick:n},"Add to publication"))})):null}function Se(e){var n=e.isVisible,t=e.hide;return i.createElement(oe.V,{isVisible:n,hide:t,withCloseButton:!0},i.createElement(A.x,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},i.createElement(ue.X6,{scale:"M",tag:"h3"},"Story submitted"),i.createElement(A.x,{paddingTop:"8px",paddingBottom:"24px"},i.createElement(me.QE,{scale:"M"},"We’ll email you when the publication editor has reviewed your submission.")),i.createElement(re.zx,{buttonStyle:"OBVIOUS",onClick:t},"OK")))}var be=function(e){var n=e.children,t=e.post,a=e.noQueryReturn,l=t.creator;return l?i.createElement(le.I,null,(function(e){return e?e.id!==l.id?a:i.createElement(K.A,{query:q,ssr:!1},(function(e){var t=e.loading,i=e.error,a=e.data;return n({loading:t,error:i,data:a})})):a})):a},ye=function(e){var n=e.post,t=e.hide,a=e.showLoadingIndicator,o=e.isVisible,r=e.children,d=i.useState(!1),s=(0,l.Z)(d,2),c=s[0],u=s[1],m=i.useState(""),p=(0,l.Z)(m,2),k=p[0],v=p[1],f=ie(n),g=function(e){var n=(0,X.D)(ne),t=(0,l.Z)(n,1)[0];return(0,i.useCallback)((function(n){return t({variables:{collectionSlug:(null==n?void 0:n.slug)||"",postId:e.id,status:$.Zj.PENDING},optimisticResponse:{manageCollectionPostStatus:{__typename:"Post",id:e.id,statusForCollection:$.Zj.PENDING,pendingCollection:n}}})}),[e])}(n);return c||pe.V6.on("load",(function(){return u(!0)})),n.isPublished&&c?i.createElement(de.B,null,(function(e){var l=e.isVisible,d=e.hide,s=e.show;return i.createElement(i.Fragment,null,i.createElement(Se,{hide:d,isVisible:l}),i.createElement(be,{post:n,noQueryReturn:r},(function(e){var l=e.loading,d=e.error,c=e.data;if(l||d)return r;var u=(void 0===c?{viewer:void 0}:c).viewer,m=n.creator;if(!u||!m||u.id!==m.id)return r;var p=u.adminCollections,S=u.writerCollections;if(0===p.length&&0===S.length)return r;var b=p.concat(S).filter((function(e){return!!e&&!!e.slug&&!!e.name})).map((function(e){return{name:e.slug||"",value:e.name||"",content:i.createElement(fe,{collection:e})}})),y=ve.concat(b),E=p.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),h=S.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),w="";if(k){var x=y.find((function(e){return e.name===k}));x&&(w=x.value)}var C="addStoryToPublicationTitle";return i.createElement(se.J,{ariaId:ke,hide:t,isVisible:o,popoverRenderFn:function(){return i.createElement(A.x,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},i.createElement(R.F,{scale:"M",color:"DARKER",ariaLabelledById:C},"Add your story to a publication:"),i.createElement(A.x,{marginTop:"10px",position:"relative"},i.createElement(A.x,{position:"absolute",height:"16px",width:"100%",bottom:"0",zIndex:"100",backgroundImage:"linear-gradient(transparent, #ffffff)"}),i.createElement(A.x,{maxHeight:"160px",overflow:"auto"},i.createElement(ce.E,{value:w,onChange:v,options:y,radioButtonsName:"addStory",ariaLabelledBy:C}))),i.createElement(A.x,{display:"flex",marginTop:"20px"},k in E?i.createElement(re.zx,{onClick:function(){var e=E[k];t(),a(),f(e).then((function(){window.location.reload()}))},buttonStyle:"OBVIOUS"},"Add story"):i.createElement(re.zx,{onClick:function(){var e=h[k];g(e),t(),s()},disabled:!k},"Submit"),i.createElement(A.x,{marginLeft:"10px"},i.createElement(R.F,{scale:"M",color:"LIGHTER"},i.createElement(N.r,{onClick:t},i.createElement(A.x,{padding:"10px"},"Cancel"))))),i.createElement(A.x,{marginTop:"10px"},i.createElement(R.F,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},r)})))})):r},Ne=function(e){var n=e.children,t=e.isVisible,a=e.post,l=e.hide,o=e.showLoadingIndicator,r=ie(a),d=ae(a),s=(0,f.I0)(),c=a.pendingCollection;return c?i.createElement(se.J,{ariaId:"manageSubmissionPopover",isVisible:t,hide:l,popoverRenderFn:function(){return i.createElement(A.x,{padding:"16px",maxWidth:"280px"},i.createElement(A.x,{display:"flex",flexDirection:"row",alignItems:"center"},i.createElement(A.x,{paddingRight:"8px"},i.createElement(W.v,{collection:c,size:40})),i.createElement(R.F,{scale:"S"},"This draft is submitted to ",c.name,".")),i.createElement(A.x,{flexDirection:"row",display:"flex",paddingTop:"16px"},i.createElement(A.x,{paddingRight:"8px"},i.createElement(re.zx,{buttonStyle:"OBVIOUS",onClick:function(){l(),o(),r(a.pendingCollection).then((function(){window.location.reload()}))}},"Accept")),i.createElement(re.zx,{buttonStyle:"SUBTLE",onClick:function(){d(a.pendingCollection).then((function(){s((0,L.Dx)({message:"Story removed from ".concat(c.name||"publication")}))})),l()}},"Don't accept")))}},n):n},Ee=function(e,n){return n&&e.creator&&n.id===e.creator.id},he=t(39727),we="removeFromPublicationPopover",xe=function(e){var n=e.viewer,t=e.show,a=e.post,l=(0,he.g)(a.pendingCollection||a.collection).viewerEdge,o=null==l?void 0:l.isEditor;return n&&("APPROVED"===a.statusForCollection&&(o||function(e,n){var t=e.pendingCollection||e.collection;return t&&t.creator&&n.id===t.creator.id}(a,n)||Ee(a,n))||"PENDING"===a.statusForCollection&&Ee(a,n))?i.createElement(y.Sl,null,i.createElement(N.r,{"aria-controls":we,"aria-expanded":"false",onClick:t},"Remove story from publication")):null},Ce=function(e){var n=e.children,t=e.isVisible,a=e.hide,l=e.post,o=e.viewer,r=(0,f.I0)(),d=ae(l),s=l.collection||l.pendingCollection;return s?i.createElement(se.J,{ariaId:we,isVisible:t,hide:a,popoverRenderFn:function(){return i.createElement(A.x,{padding:"16px",maxWidth:"280px"},i.createElement(A.x,{display:"flex",flexDirection:"row",alignItems:"center"},i.createElement(A.x,{paddingRight:"8px"},i.createElement(W.v,{collection:s,size:40})),"APPROVED"===l.statusForCollection?i.createElement(R.F,{scale:"S"},Ee(l,o)?"Your":"This"," story is published in"," ",s.name,"."):"PENDING"===l.statusForCollection?i.createElement(R.F,{scale:"S"},"Your story is being reviewed by ",s.name," editors."):i.createElement(R.F,{scale:"S"},"This draft is submitted to ",s.name)),i.createElement(A.x,{flexDirection:"row",display:"flex",paddingTop:"16px"},i.createElement(A.x,{paddingRight:"8px"},i.createElement(re.zx,{buttonStyle:"SUBTLE",onClick:function(){d(s).then((function(){r((0,L.Dx)({message:"Story removed from ".concat(s.name||"publication")}))}),(function(){r((0,L.Dx)({message:"There was a problem removing the story from ".concat(s.name||"publication"),toastStyle:"ERROR"}))})),a()}},"PENDING"===l.statusForCollection?"Cancel submission":"Remove from ".concat(s.name||"")))))}},n):n},Fe=t(43220),Oe=t(31048),Pe=t(74302),Ie=t(44573),De=t(26350),Ae=t(96462),Re=t(45509),Te=t(37774),_e=t(1383),Ve=t(92661),Me=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(){for(var e=0,t=n;e<t.length;e++)(0,t[e])()}},je=t(92001),Le=t(93647),Be=t(36736),Ze=t(91727),Ue=t(38487),Ge=t(57477),He={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"allowResponses"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"statusForCollection"}},{kind:"Field",name:{kind:"Name",value:"isLocked"}},{kind:"Field",name:{kind:"Name",value:"isPublished"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}},{kind:"Field",name:{kind:"Name",value:"curationEligibleAt"}},{kind:"Field",name:{kind:"Name",value:"mediumUrl"}},{kind:"Field",name:{kind:"Name",value:"responseDistribution"}},{kind:"Field",name:{kind:"Name",value:"visibility"}},{kind:"Field",name:{kind:"Name",value:"inResponseToPostResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"inResponseToCatalogResult"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}}]}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_creator"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"avatar"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"domain"}},{kind:"Field",name:{kind:"Name",value:"slug"}},{kind:"FragmentSpread",name:{kind:"Name",value:"MutePopoverOptions_collection"}},{kind:"FragmentSpread",name:{kind:"Name",value:"auroraHooks_publisher"}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"useIsPinnedInContext_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"}},{kind:"FragmentSpread",name:{kind:"Name",value:"AddToCatalogBase_post"}}]}}].concat((0,Q.Z)(je.m.definitions),(0,Q.Z)(Le.C.definitions),(0,Q.Z)(je.G.definitions),(0,Q.Z)(Be.x.definitions),(0,Q.Z)(Ze.S.definitions),(0,Q.Z)(Ue.g.definitions),(0,Q.Z)(Ge._C.definitions))},ze={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"CreatorActionOverflowPopoverQuery"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreatorActionOverflowPopover_post"}}]}}]}}].concat((0,Q.Z)(He.definitions))};function Ke(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function We(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ke(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ke(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Qe=function(e){var n=(0,s.a)(ze,{variables:{postId:e.post.id}}).data;if(null==n||!n.post)return null;var t=We(We({},e),{},{post:n.post});return i.createElement(Ye,t)},Ye=function(e){var n,t,o=e.post,r=e.showLoadingIndicator,s=e.hideUndoApplause,u=void 0!==s&&s,m=e.isResponsive,p=e.popoverPositioningStrategy,k=e.hideAddToList,f=void 0===k||k,g=e.hideOnScroll,E=e.testId,w=e.prependMenuItems,R=e.rules,T=o.creator,V=o.collection,j=i.useState(!1),B=(0,l.Z)(j,2),Z=B[0],U=B[1],G=i.useState(!1),K=(0,l.Z)(G,2),W=K[0],Q=K[1],Y=i.useState(!1),J=(0,l.Z)(Y,2),q=J[0],X=J[1],ee=o.allowResponses,ne=o.pendingCollection,te=o.mediumUrl,ie=o.visibility,ae=(0,he.g)(V).viewerEdge,le=(0,he.g)(ne).viewerEdge,oe=(0,b.T)(o).viewerEdge,re=(0,L.w)(),de=(0,S.H)().value,ce=null==de?void 0:de.id,ue=o.responseDistribution===$.Et.DISTRIBUTED,me=!!o.inResponseToPostResult||!!o.inResponseToCatalogResult,pe=me?"response":"story",ke=(0,Oe.K)(o),ve=(0,l.Z)(ke,2),fe=ve[0],Se=ve[1],be=(0,Fe.U)(o.collection),Ee=(0,Fe.U)(o.creator),we=i.useCallback((function(e){var n,t,i;re({extraParams:{collectionName:(null===(n=o.collection)||void 0===n?void 0:n.name)||"",becamePinned:!(null===(t=e.data)||void 0===t||null===(i=t.setPinnedAt)||void 0===i||!i.pinnedAt)},toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(n=o.collection)||void 0===n?void 0:n.name]),je=i.useCallback((function(e,n){var t;"MutationSuccess"===(null===(t=e.data)||void 0===t?void 0:t.setPostPinnedOnCreatorProfile.__typename)&&re({message:"This ".concat(pe,n?" has been unpinned from your profile's homepage":" has been pinned to your profile's homepage")})}),[]),Le=i.useCallback((function(){Se().then(we)}),[Se,we,null==o||null===(t=o.collection)||void 0===t?void 0:t.name]),Be=(0,Oe.I)(o),Ze=(0,l.Z)(Be,2),Ue=Ze[0],Ge=Ze[1],He=i.useCallback((function(){Ge().then((function(e){return je(e,Ue)}))}),[Ge,je]),ze=(0,h.v9)((function(e){return e.config.authDomain})),Ke=i.useState(!1),We=(0,l.Z)(Ke,2),Qe=We[0],Ye=We[1],Je=(0,H.O)(!1),qe=(0,l.Z)(Je,3),Xe=qe[0],$e=qe[1],en=qe[2],nn=(0,H.O)(!1),tn=(0,l.Z)(nn,4),an=tn[0],ln=tn[2],on=tn[3],rn=(0,O.j)(o.id),dn=(0,l.Z)(rn,1)[0],sn=(0,H.O)(!1),cn=(0,l.Z)(sn,3),un=cn[0],mn=cn[1],pn=cn[2],kn=(0,Ve.qt)("ShowHome",{}),vn=i.useCallback((function(){dn().then((function(){window.location.assign(kn)}))}),[dn,kn]),fn="Delete story";ue?fn="Delete story and response":me&&(fn="Delete response");var gn=ue?Pe.Q:i.createElement(c.M,{entityName:pe}),Sn=(0,Ie.P5)("can_edit_members_only_posts");if(!T||!de)return null;var bn=ce===T.id,yn=(null==ae?void 0:ae.isEditor)||(null==le?void 0:le.isEditor),Nn=bn||yn,En=Sn&&o&&o.isLocked,hn=Nn||En,wn="creatorActionOverflowMenu",xn="LOCKED"===ie,Cn=yn&&!bn||!Nn,Fn=!me||ue,On=function(){ue&&(ln(),$e())};if(Qe)return i.createElement(I.l,{to:(0,_.d0)(ze,o.id)});var Pn={kind:$.ej.POST,target:o};return i.createElement(i.Fragment,null,i.createElement(_e.Q,{buttonStyle:"STRONG",cancelText:"Cancel",isVisible:Xe,onConfirm:function(){Ye(!0)},hide:en,titleText:"Edit story and response",confirmText:"Continue",isDestructiveAction:!1},Pe.t),i.createElement(_e.Q,{buttonStyle:"ERROR",cancelText:"Cancel",isVisible:un,onConfirm:vn,hide:pn,titleText:fn,confirmText:"Delete",isDestructiveAction:!0},gn),i.createElement(C.a,(0,a.Z)({},Pn,{viewer:de}),(function(e){var n=e.onClick;return i.createElement(se.J,{targetDistance:10,ariaId:wn,isVisible:an,hide:ln,positioningStrategy:p,hideOnScroll:g,popoverRenderFn:function(){return i.createElement(y.mX,null,w&&i.createElement(i.Fragment,null,w(ln)),i.createElement(i.Fragment,null,i.createElement(F.l,{type:"popover",handleClick:On,href:(0,_.d0)(ze,o.id),isVisible:!!hn},"Edit ",pe),V&&yn&&be&&Fn&&i.createElement(y.Sl,null,i.createElement(N.r,{onClick:Le},fe?"Unpin this ".concat(pe," from "):"Pin this ".concat(pe," to "),V.name)),bn&&Ee&&Fn&&i.createElement(y.Sl,null,i.createElement(N.r,{onClick:He},Ue?"Unpin this ".concat(pe," from your profile"):"Pin this ".concat(pe," to your profile"))),i.createElement(D.w,{post:o,onClick:ln,menuStyle:"TEXT"}),Nn?i.createElement(i.Fragment,null,i.createElement(y.oK,null),i.createElement(y.Sl,null,i.createElement(N.r,{href:(0,_.KI)(ze,o.id)},d()(pe)," settings"))):null,Nn&&i.createElement(y.Sl,null,i.createElement(N.r,{href:(0,_.T0)(ze,o.id)},d()(pe)," stats")),Nn&&xn&&te&&(null==oe?void 0:oe.shareKey)&&i.createElement(M,{post:o,shareKey:null==oe?void 0:oe.shareKey}),Nn&&i.createElement(y.oK,null),Nn?i.createElement(i.Fragment,null,i.createElement(z,{hidePopover:ln,postId:o.id,allowResponses:ee}),!f&&i.createElement(y.Sl,null,i.createElement(N.r,{"aria-controls":wn,"aria-expanded":"false",onClick:function(e){ln(),n(e)}},"Add to list")),i.createElement(ge,{post:o,show:function(){Q(!0),ln()}}),i.createElement(xe,{viewer:de,post:o,show:function(){X(!0),ln()}}),bn&&i.createElement(y.Sl,null,i.createElement(N.r,{onClick:Me(ln,mn),color:"RED"},"Delete ",pe))):null,Cn?i.createElement(i.Fragment,null,yn&&i.createElement(y.oK,null),!u&&i.createElement(x,{post:o,hidePopover:ln}),i.createElement(i.Fragment,null,ce?i.createElement(Te.z,{targetUserId:T.id,postId:o.id,hidePopover:ln,viewerId:ce}):i.createElement(y.Sl,null,i.createElement(De.R,{operation:"register",post:o,susiEntry:"report_footer"},"Report this ",pe))),i.createElement(P.q,{hidePopover:ln,creator:T,collection:V,postId:o.id}),i.createElement(Ae.F,{hidePopover:ln,creator:T,viewer:de}),i.createElement(Re.j,{hidePopover:ln,creator:T,viewer:de})):null))}},i.createElement(ye,{post:o,isVisible:W,hide:function(){Q(!1)},showLoadingIndicator:r},i.createElement(Ce,{viewer:de,post:o,isVisible:q,hide:function(){X(!1)}},i.createElement(Ne,{post:o,isVisible:Z,hide:function(){U(!1)},showLoadingIndicator:r},i.createElement(A.x,{flexGrow:"0",marginRight:"-4px"},i.createElement(v,{ariaControls:wn,ariaExpanded:an?"true":"false",ariaLabel:"More options",onClick:function(){Z?U(!1):W?Q(!1):on()},isResponsive:m,tooltipText:"More",testId:E,rules:R}))))))})))},Je=t(25735);function qe(){return qe=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},qe.apply(this,arguments)}var Xe=i.createElement("path",{d:"M6.2 16.8A7.5 7.5 0 1 0 16.8 6.2 7.5 7.5 0 0 0 6.2 16.8z",stroke:"#000",strokeWidth:2,strokeLinecap:"round"}),$e=i.createElement("path",{d:"M6 6l11 11",stroke:"#000",strokeWidth:2});const en=function(e){return i.createElement("svg",qe({width:19,height:19,viewBox:"0 0 23 23",fill:"none"},e),Xe,$e)};var nn=t(66411),tn=t(69920);function an(){return an=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},an.apply(this,arguments)}var ln=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12a10 10 0 1 1-20 0 10 10 0 0 1 20 0zm-13.75-.5a.5.5 0 0 0 0 1h7.5a.5.5 0 0 0 0-1h-7.5z",fill:"currentColor"});const on=function(e){return i.createElement("svg",an({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),ln)};function rn(){return rn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},rn.apply(this,arguments)}var dn=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22 12a10 10 0 1 1-20 0 10 10 0 0 1 20 0zM12 7.75c.28 0 .5.22.5.5v3.25h3.25a.5.5 0 0 1 0 1H12.5v3.25a.5.5 0 0 1-1 0V12.5H8.25a.5.5 0 0 1 0-1h3.25V8.25c0-.28.22-.5.5-.5z",fill:"currentColor"});const sn=function(e){return i.createElement("svg",rn({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),dn)};function cn(){return cn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},cn.apply(this,arguments)}var un=i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 21a9 9 0 1 0 0-18 9 9 0 0 0 0 18zm10-9a10 10 0 1 1-20 0 10 10 0 0 1 20 0zM7.75 12c0-.28.22-.5.5-.5h3.25V8.25a.5.5 0 0 1 1 0v3.25h3.25a.5.5 0 0 1 0 1H12.5v3.25a.5.5 0 0 1-1 0V12.5H8.25a.5.5 0 0 1-.5-.5z",fill:"currentColor"});const mn=function(e){return i.createElement("svg",cn({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),un)};var pn=t(4423);function kn(e){var n=e.hidePopover,t=(0,pn.e)(),a=t.showMore,l=t.showLess,o=t.explicitSignal,r=t.undo,d=o===$.tG.SHOW_MORE,s=o===$.tG.SHOW_LESS,c=(0,nn.pK)(),u=(0,i.useCallback)((function(){d?r(c):a(c),n()}),[a,n,d,r,c]),m=(0,i.useCallback)((function(){s?r(c):l(c),n()}),[l,n,s,r,c]);return i.createElement(i.Fragment,null,i.createElement(vn,{value:$.tG.SHOW_MORE,onClick:u,isSelected:d}),i.createElement(vn,{value:$.tG.SHOW_LESS,onClick:m,isSelected:s}),i.createElement(y.oK,null))}var vn=function(e){var n=e.value,t=e.onClick,a=e.isSelected;return i.createElement(y.Sl,null,i.createElement(N.r,{onClick:t},i.createElement(A.x,{display:"flex"},i.createElement(A.x,{marginRight:"12px",flexShrink:"0"},i.createElement(fn,{value:n,isSelected:a})),i.createElement(A.x,{display:"flex",flexDirection:"column",marginTop:"2px",gap:"4px",textAlign:"left"},"Show ",n===$.tG.SHOW_MORE?"more":"less",i.createElement(R.F,{scale:"S"},"Recommend ",n===$.tG.SHOW_MORE?"more":"fewer"," stories like this to me.")))))};function fn(e){var n=e.isSelected;return e.value===$.tG.SHOW_MORE?n?i.createElement(sn,null):i.createElement(mn,null):n?i.createElement(on,null):i.createElement(tn.Z,null)}var gn=t(17778),Sn=t(61095),bn=t(18627);function yn(e){var n=e.author,t=e.collection,a=e.hidePopover,l=(0,bn.A)(),o=(0,Sn.Pd)(n).viewerEdge,r=(0,he.g)(t).viewerEdge,d=(null==n?void 0:n.id)||"",s=(null==t?void 0:t.id)||"",c=null==o?void 0:o.isFollowing,u=null==r?void 0:r.isFollowing,m=(0,gn.l)(d,s),p=m.followUser,k=m.unfollowUser,v=m.followCollection,f=m.unfollowCollection,g=(0,nn.pK)(),b=(0,S.H)().value,E=b&&d===b.id,h=(0,i.useCallback)((function(){l.event("user.".concat(c?"unfollowed":"followed"),{followSource:g,targetUserId:d}),c?k():p(),null==a||a()}),[d,c,p,k,a,g]),w=(0,i.useCallback)((function(){l.event("collection.".concat(u?"unfollowed":"followed"),{followSource:g,collectionId:s}),u?f():v(),null==a||a()}),[s,u,v,a,g,f]);return b?i.createElement(i.Fragment,null,!!n&&!E&&i.createElement(y.Sl,null,i.createElement(N.r,{onClick:h},c?"Unfollow":"Follow"," author")),!!t&&!(null!=r&&r.isEditor)&&i.createElement(y.Sl,null,i.createElement(N.r,{onClick:w},u?"Unfollow":"Follow"," publication"))):null}var Nn=t(42732),En=function(e){var n=e.post,t=e.setDismissedPostId,o=e.isResponsive,r=e.hideNegativeSignalItem,d=e.popoverPositioningStrategy,s=e.hideAddToList,c=void 0===s||s,u=e.viewer,m=e.hideOnScroll,p=e.testId,k=e.prependMenuItems,f=e.rules,g=n.id,S=n.creator,b=n.collection,E=(0,H.O)(!1),h=(0,l.Z)(E,4),w=h[0],F=h[2],O=h[3],I=(0,Je.V)({name:"enable_explicit_signals",placeholder:!1}),D=(0,Nn.c)({post:n,onShowLess:F,setDismissedPostId:t}).handleShowLess,R={kind:$.ej.POST,target:n},T=(0,i.useCallback)((function(e){return i.createElement(y.mX,{width:I&&!r?"248px":void 0},k&&i.createElement(i.Fragment,null,k(F)),!r&&(I?i.createElement(kn,{hidePopover:F}):i.createElement(A.x,{borderBottom:"neutral.primary",paddingBottom:"4px",marginBottom:"4px"},i.createElement(y.Sl,null,i.createElement(N.r,{onClick:D,"aria-label":"Show less like this"},i.createElement(A.x,{display:"flex",flexDirection:"row",alignItems:"center",borderBottom:void 0,ariaHidden:"true"},i.createElement(A.x,{marginRight:"4px"},i.createElement(en,null)),i.createElement(A.x,null,"Show less like this")))))),!c&&i.createElement(y.Sl,null,i.createElement(N.r,{"aria-controls":"aria-id","aria-expanded":"false",onClick:function(){F(),e()}},"Add to list")),i.createElement(x,{post:n,hidePopover:F}),i.createElement(yn,{author:S,collection:b,hidePopover:F}),i.createElement(y.oK,null),i.createElement(P.q,{creator:S,collection:b,hidePopover:F,postId:g}),i.createElement(Te.z,{postId:g,viewerId:null==u?void 0:u.id,targetUserId:(null==S?void 0:S.id)||"",hidePopover:F}))}),[I,k]);return null!=S&&S.id?i.createElement(C.a,(0,a.Z)({},R,{viewer:u}),(function(e){var n=e.onClick;return i.createElement(se.J,{isVisible:w,positioningStrategy:d,targetDistance:10,hide:F,popoverRenderFn:function(){return T(n)},hideOnScroll:m},i.createElement(v,{onClick:O,ariaLabel:"More options",isResponsive:o,tooltipText:"More",testId:p,rules:f}))})):null},hn=function(e){var n=e.post,t=e.setDismissedPostId,a=e.isResponsive,l=e.hideNegativeSignalItem,o=e.popoverPositioningStrategy,r=e.hideAddToList,d=void 0===r||r,s=e.hideOnScroll,c=e.testId,u=e.prependMenuItems,m=e.rules,p=n.creator,k=n.collection,v=n.visibility,f=(0,S.H)(),g=f.loading,b=f.value,y=(0,he.g)(k).viewerEdge,N=!g&&!!b,E=!(null==y||!y.isEditor),h=(null==b?void 0:b.id)===(null==p?void 0:p.id),w=d||v===$.Wn.UNLISTED;return p&&N?E||h?i.createElement(de.B,null,(function(e){var t=e.show;return i.createElement(Qe,{post:n,showLoadingIndicator:t,isResponsive:a,popoverPositioningStrategy:o,hideAddToList:w,hideOnScroll:s,testId:c,prependMenuItems:u,rules:m})})):i.createElement(En,{post:n,setDismissedPostId:t,isResponsive:a,hideNegativeSignalItem:l,popoverPositioningStrategy:o,hideAddToList:w,viewer:b,hideOnScroll:s,testId:c,prependMenuItems:u,rules:m}):null}},38487:(e,n,t)=>{"use strict";t.d(n,{g:()=>l});var i=t(87329),a=t(46732),l={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"OverflowMenuItemUndoClaps_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"clapCount"}},{kind:"FragmentSpread",name:{kind:"Name",value:"ClapMutation_post"}}]}}].concat((0,i.Z)(a.JP.definitions))}},42732:(e,n,t)=>{"use strict";t.d(n,{c:()=>k});var i=t(87329),a=t(82492),l=t.n(a),o=t(26075),r=t(90386),d=t(67294),s=t(59250),c=t(25550),u=t(18627),m=t(66411),p=t(78285),k=function(e){var n=e.post,t=e.onShowLess,a=e.setDismissedPostId,k=n.id,v=n.collection,f=(0,c.r)().viewerId,g=(0,s.jM)(),S=g.setSeeLessPostIds,b=g.isMutingFromHomeFeed,y=(0,p.w)(),N=(0,o.x)().cache,E=(0,u.A)(),h=(0,m.pK)(),w=(0,d.useRef)(null),x=(0,d.useCallback)((function(){w.current=window.setTimeout((function(){E.event("post.see_less",{userId:f,collection:null==v?void 0:v.id,postId:k,source:h})}),3e3)}),[]),C=(0,d.useCallback)((function(){null!==w.current&&window.clearTimeout(w.current)}),[]),F=(0,d.useCallback)((function(){N.modify({id:N.identify((0,r.kQ)("ROOT_QUERY")),fields:{webRecommendedFeed:function(e,n){var t=n.readField;return l()({},e,{items:e.items.filter((function(e){return(null==e?void 0:e.post)&&t("id",e.post)!==k}))})}}})}),[k]);return{handleShowLess:(0,d.useCallback)((function(){x(),F(),b&&(S((function(e){return[].concat((0,i.Z)(e),[k])})),null==a||a(k)),y({toastStyle:"USER_NEGATIVE_SIGNAL",extraParams:{onClickUndo:C}}),null==t||t()}),[])}}},75514:(e,n,t)=>{"use strict";t.d(n,{H:()=>i});var i={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UserReportStoryMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"reason"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reportStoryAndMaybeBlockAuthor"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"targetPostId"}}},{kind:"Argument",name:{kind:"Name",value:"targetAuthorId"},value:{kind:"Variable",name:{kind:"Name",value:"targetAuthorId"}}},{kind:"Argument",name:{kind:"Name",value:"alsoBlockAuthor"},value:{kind:"Variable",name:{kind:"Name",value:"alsoBlockAuthor"}}},{kind:"Argument",name:{kind:"Name",value:"reason"},value:{kind:"Variable",name:{kind:"Name",value:"reason"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"viewerEdge"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"isBlocking"}}]}}]}}]}}]}},78964:(e,n,t)=>{"use strict";t.d(n,{J:()=>s});var i=t(34699),a=t(21919),l=t(67294),o=t(18627),r=t(78285),d=t(75514);function s(e){var n=e.viewerId,t=e.targetAuthorId,s=e.targetPostId,c=e.onOptimisticComplete,u=(0,r.w)(),m=(0,o.A)(),p=(0,a.D)(d.H),k=(0,i.Z)(p,1)[0];return(0,l.useCallback)((function(e,i){k({variables:{targetAuthorId:t,targetPostId:s,alsoBlockAuthor:e,reason:i},onCompleted:function(){u({message:"Successfully reported post."}),m.event("post.flagged",{postId:s,reason:i})},onError:function(){u({message:"Unable to report this story. Please try again later."})},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:t,viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(t,"-viewerId:").concat(n),isBlocking:e}}}}),null==c||c()}),[k,n,t,s,c])}},91727:(e,n,t)=>{"use strict";t.d(n,{S:()=>i,P:()=>a});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"NewsletterV3EmailToSubscribersMenuItem_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"creator"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"newsletterV3"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"subscribersCount"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"isNewsletter"}},{kind:"Field",name:{kind:"Name",value:"isAuthorNewsletter"}}]}}]},a={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SendPostAsEmailsMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sendPostAsEmails"},arguments:[{kind:"Argument",name:{kind:"Name",value:"postId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}}]}]}}]}},70679:(e,n,t)=>{"use strict";t.d(n,{w:()=>w});var i=t(96156),a=t(34699),l=t(21919),o=t(67294),r=t(25267),d=t(38352),s=t(93310),c=t(77355),u=t(1383),m=t(87691),p=t(14646),k=t(78285);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},v.apply(this,arguments)}var f=o.createElement("path",{d:"M0 .35v15.3h20V.35H0zm6.95 9.38l3.05 2.5 3.05-2.5 4.88 4.73H2.07l4.88-4.73zM1.2 13.64V5.02l4.82 3.94-4.82 4.68zm12.78-4.68l4.82-3.94v8.62l-4.82-4.68zm4.82-7.42v1.94l-8.8 7.2-8.8-7.2V1.54h17.6z"});const g=function(e){return o.createElement("svg",v({width:20,height:16,viewBox:"0 0 20 16"},e),f)};var S=t(68894),b=t(91727);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,i.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function E(e){return{fill:e.colorTokens.foreground.neutral.secondary.base}}var h={height:"16px",width:"16px",marginLeft:"4px"};function w(e){var n=e.post,t=e.onClick,i=e.menuStyle,v=(0,p.I)(),f=(0,S.O)(!1),y=(0,a.Z)(f,3),w=y[0],x=y[1],C=y[2],F=(0,k.w)(),O=function(){C(),t()},P=(0,l.D)(b.P,{variables:{postId:(null==n?void 0:n.id)||""},onCompleted:function(e){var n=e.sendPostAsEmails;F(n?{message:"Your story has been emailed to subscribers.",toastStyle:"MESSAGE",duration:2e3}:{message:"We couldn't process your request. Try again, or contact our support team.",toastStyle:"ERROR",duration:2e3})},update:function(e,t){var i={id:"Post:".concat(null==n?void 0:n.id),fragment:b.S,fragmentName:"NewsletterV3EmailToSubscribersMenuItem_post"},a=e.readFragment(i);t.data&&a&&e.writeFragment(N(N({},i),{},{data:N(N({},a),{},{isAuthorNewsletter:t.data.sendPostAsEmails})}))}}),I=(0,a.Z)(P,1)[0];return o.createElement(r.I,null,(function(e){var a,l,r;return e&&e.id===(null==n||null===(a=n.creator)||void 0===a?void 0:a.id)&&(null==n||!n.isNewsletter)&&((null==n||null===(l=n.creator)||void 0===l||null===(r=l.newsletterV3)||void 0===r?void 0:r.subscribersCount)||0)>0?o.createElement(o.Fragment,null,o.createElement(d.Sl,{paddingTopBottom:"8px"},o.createElement(s.r,{onClick:function(){null!=n&&n.isAuthorNewsletter?(F({message:"You’ve already sent this story to subscribers.",toastStyle:"ERROR",duration:2e3}),t()):x()}},"TEXT"===i?o.createElement(c.x,{display:"inline-block"},o.createElement(m.F,{scale:"M"},"Email to subscribers")):o.createElement(c.x,{display:"inline-block"},o.createElement(g,{className:v([E,h])}),o.createElement(c.x,{display:"inline-block",marginLeft:"20px"},o.createElement(m.F,{scale:"S"},"Email to subscribers"))))),o.createElement(u.Q,{onConfirm:function(){I(),O()},isVisible:w,hide:O,titleText:"Email to subscribers",confirmText:"Send",buttonStyle:"STRONG",buttonSize:"LARGE",showCancelButton:!0,withCloseButton:!0,isDestructiveAction:!1},"A link to this story will be emailed to all your subscribers.")):o.createElement(o.Fragment,null)}))}},43220:(e,n,t)=>{"use strict";t.d(n,{U:()=>i,I:()=>a});var i=function(e){return!!e&&(e.isAuroraVisible||"Collection"===e.__typename&&e.isAuroraEligible&&e.viewerEdge.isEditor)},a=function(e){return!!e&&("Collection"===e.__typename?e.isAuroraVisible||e.isAuroraEligible&&e.viewerEdge.isEditor:e.isAuroraVisible)}},36736:(e,n,t)=>{"use strict";t.d(n,{x:()=>i});var i={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"useIsPinnedInContext_post"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}},{kind:"Field",name:{kind:"Name",value:"pinnedByCreatorAt"}}]}}]}},31048:(e,n,t)=>{"use strict";t.d(n,{K:()=>d,I:()=>s});var i=t(34699),a=t(21919),l=t(67294),o={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SetPinnedAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"collectionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"setPinnedAt"},arguments:[{kind:"Argument",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"Argument",name:{kind:"Name",value:"targetCollectionId"},value:{kind:"Variable",name:{kind:"Name",value:"collectionId"}}},{kind:"Argument",name:{kind:"Name",value:"pinnedAt"},value:{kind:"Variable",name:{kind:"Name",value:"pinnedAt"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Post"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"collection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pendingCollection"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}}]}},{kind:"Field",name:{kind:"Name",value:"pinnedAt"}}]}}]}}]}}]},r={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PostSetPinnedByCreatorAtMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"postId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"isPinned"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"setPostPinnedOnCreatorProfile"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"targetPostId"},value:{kind:"Variable",name:{kind:"Name",value:"postId"}}},{kind:"ObjectField",name:{kind:"Name",value:"isPinned"},value:{kind:"Variable",name:{kind:"Name",value:"isPinned"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}}]}}]}}]},d=function(e){var n=e.id,t=e.collection,r=e.pendingCollection,d=e.pinnedAt,s=(t||r||{id:""}).id,c=(0,a.D)(o,{optimisticResponse:{__typename:"Mutation",setPinnedAt:{__typename:"Post",id:n,collection:t,pendingCollection:r,pinnedAt:d?0:Date.now()}}}),u=(0,i.Z)(c,1)[0],m=l.useCallback((function(){return u({variables:{postId:n,collectionId:s,pinnedAt:!d}})}),[n,s,d,u]);return[d,m]},s=function(e){var n=e.id,t=e.pinnedByCreatorAt,o=(0,a.D)(r,{optimisticResponse:{setPostPinnedOnCreatorProfile:{__typename:"MutationSuccess"}},update:function(e,i){var a;"MutationSuccess"===(null===(a=i.data)||void 0===a?void 0:a.setPostPinnedOnCreatorProfile.__typename)&&e.modify({id:"Post:".concat(n),fields:{pinnedByCreatorAt:function(){return t?0:Date.now()}}})}}),d=(0,i.Z)(o,1)[0],s=l.useCallback((function(){return d({variables:{postId:n,isPinned:!t}})}),[n,d,t]);return[t,s]}},74302:(e,n,t)=>{"use strict";t.d(n,{Q:()=>i,t:()=>a});var i="This story is also a response to another story. Are you sure you want to delete this story?",a="This story is also a response to another story. Any edits are applied to both."},37774:(e,n,t)=>{"use strict";t.d(n,{z:()=>u});var i=t(34699),a=t(67294),l=t(61095),o=t(38352),r=t(50474),d=t(93310),s=t(68894),c=t(78964),u=function(e){var n=e.hidePopover,t=e.targetUserId,u=e.postId,m=e.viewerId,p=(0,l.Pd)({id:t}).viewerEdge,k=!(null==p||!p.isBlocking),v=(0,s.O)(!1),f=(0,i.Z)(v,3),g=f[0],S=f[1],b=f[2],y=(0,a.useCallback)((function(){b(),n()}),[n,b]),N=(0,c.J)({viewerId:m,targetAuthorId:t,targetPostId:u,onOptimisticComplete:y});return a.createElement(a.Fragment,null,a.createElement(r.U,{onSubmit:N,isVisible:g,hide:y,type:"story",alreadyBlocking:k}),a.createElement(o.Sl,null,a.createElement(d.r,{onClick:S,color:"RED"},"Report story...")))}},53563:(e,n,t)=>{"use strict";t.d(n,{u:()=>I});var i=t(34699),a=t(67294),l=t(71899),o=t(91553),r=t(77355),d=t(47230),s=t(91583),c=t(18635),u=t(18634),m=t(21755),p=t(20113),k=t(87691),v=t(62528),f=t(78142),g=t(17583),S="8px 28px 10px",b={xs:"4px 20px",sm:S,md:S,lg:S,xl:S},y={xs:"COMPACT",sm:"REGULAR",md:"REGULAR",lg:"REGULAR",xl:"REGULAR"},N={position:"absolute",top:"8px",left:"0",width:"100%",minHeight:"calc(100% - 8px)",borderRadius:"12px 12px 0 0",padding:"0 24px 24px"},E=function(e){return{"0%":{transform:e?"translateY(100%)":"translateY(16px)"},"100%":{transform:e?"translateY(0%)":"translateY(0px)"}}},h=function(e){return{"0%":{transform:e?"translateY(0%)":"translateY(0px)"},"100%":{transform:e?"translateY(100%)":"translateY(16px)"}}},w={"0%":{opacity:"0"},"100%":{opacity:"1"}},x={"0%":{opacity:"1"},"100%":{opacity:"0"}},C={"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.02)"},"75%":{transform:"scale(1.02)"},"100%":{transform:"scale(1)"}},F={"0%":{background:(0,f.Uy)(0)},"100%":{background:(0,f.Uy)(.25)}},O={"0%":{background:(0,f.Uy)(.25)},"100%":{background:(0,f.Uy)(0)}},P=function(e){var n=e.slideAnimationName,t=e.fadeAnimationName,i=e.isMobile;return function(){var e="".concat(n," ").concat(300,"ms forwards cubic-bezier(0.4, 0, 0.2, 1)");if(i)return{animation:e,position:"absolute",width:"100%",height:"calc(100% - 8px)"};var a="".concat(t," 150ms forwards ease-in-out");return{animation:"".concat(e,", ").concat(a)}}},I=function(e){var n=e.hide,t=e.title,S=e.subtitle,I=e.subtitleTextAlign,D=e.onConfirm,A=e.confirmText,R=e.confirmButtonStyle,T=void 0===R?"STRONG":R,_=e.cancelText,V=e.cancelButtonStyle,M=void 0===V?"OBVIOUS":V,j=e.children,L=e.withCloseButton,B=void 0===L||L,Z=e.hideOnConfirm,U=void 0===Z||Z,G=e.preventClickOutside,H=e.confirmDisabled,z=e.confirmBeforeLeavePage,K=e.delayHideEnabled,W=(0,a.useRef)(null),Q=(0,a.useState)(!1),Y=(0,i.Z)(Q,2),J=Y[0],q=Y[1],X=(0,a.useState)(!0),$=(0,i.Z)(X,2),ee=$[0],ne=$[1],te=(0,g.s)()===m.j.xs,ie=(0,v.o)({modalSlideInKeyframe:E(te),modalSlideOutKeyframe:h(te),modalFadeInKeyframe:w,modalFadeOutKeyframe:x,modalBounceKeyframe:C,overlayFadeInKeyframe:F,overlayFadeOutKeyframe:O}),ae=ie.modalSlideInKeyframe,le=ie.modalSlideOutKeyframe,oe=ie.modalFadeInKeyframe,re=ie.modalFadeOutKeyframe,de=ie.modalBounceKeyframe,se=ie.overlayFadeInKeyframe,ce=ie.overlayFadeOutKeyframe,ue=(0,a.useCallback)((function(){ne(!1)}),[]),me=(0,a.useCallback)((function(e){W.current&&G&&!te&&(e.preventDefault(),e.stopPropagation(),W.current.style.animation="".concat(de," 600ms ease-in-out"),q(!0))}),[de,G,te]);(0,l.Z)(W,me),(0,o.a)({disabled:!z});var pe,ke=(0,a.useCallback)((function(){null==D||D(),U&&ue()}),[ue,D,U]),ve=(0,a.useMemo)((function(){return D||_?a.createElement(r.x,{display:"flex",justifyContent:"flex-end"},_&&a.createElement(d.zx,{buttonStyle:M,onClick:ue,padding:b,size:y},_),_&&D&&a.createElement(r.x,{width:"16px"}),D&&a.createElement(d.zx,{buttonStyle:T,onClick:ke,padding:b,size:y,disabled:H},A)):null}),[D,A,T,_,M,ue,H]);return(0,a.useEffect)((function(){if(W.current&&J)return W.current.addEventListener("animationend",e),function(){var n;null===(n=W.current)||void 0===n||n.removeEventListener("animationend",e)};function e(){W.current.style.animation="",q(!1)}}),[J,ee,n]),(0,a.useEffect)((function(){if(!ee&&n){var e=setTimeout((function(){n()}),310);return function(){clearTimeout(e)}}}),[ee,n]),(0,a.useEffect)((function(){K&&ne(!1)}),[K]),a.createElement(s.V,{isVisible:ee,hide:G?void 0:ue,withCloseButton:!1,withLayerAnimation:!1,withAnimation:!0,padding:0,customBackgroundColor:(0,f.Uy)(.25),layerRules:(pe=ee?se:ce,function(){return{animation:"".concat(pe," 150ms forwards ease-in-out")}}),containerRules:P({slideAnimationName:ee?ae:le,fadeAnimationName:ee?oe:re,isMobile:te})},a.createElement(r.x,{ref:W,boxShadow:"rgba(0, 0, 0, 0.15) 0px 2px 10px",width:"540px",padding:"32px",borderRadius:"4px",backgroundColor:"BACKGROUND",position:"relative",xs:N},a.createElement(u.y,{xs:!0,height:"56px",marginBottom:"16px",paddingTop:"16px"},ve),a.createElement(r.x,{textAlign:"center"},a.createElement(p.X6,{scale:"S"},t)),S&&a.createElement(r.x,{marginTop:"24px",textAlign:I},a.createElement(k.F,{scale:"M",color:"DARKER"},S)),j&&a.createElement(r.x,{marginTop:"40px"},j),ve&&a.createElement(u.y,{sm:!0,md:!0,lg:!0,xl:!0,marginTop:"40px"},ve),B&&a.createElement(r.x,{position:"absolute",right:{xs:void 0,sm:"16px",md:"16px",lg:"16px",xl:"16px"},top:{xs:"18px",sm:"16px",md:"16px",lg:"16px",xl:"16px"},left:{xs:"18px",sm:void 0,md:void 0,lg:void 0,xl:void 0}},a.createElement(c.P,{isPositionAbsolute:!1,compensateInnerPadding:!1,size:"REGULAR",onClick:ue}))))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/6487.ae5ff7c0.chunk.js.map